# Dynamic configuration for TLS certificates
tls:
  certificates:
    - certFile: /etc/traefik/certs/cert.pem
      keyFile: /etc/traefik/certs/key.pem
      stores:
        - default

# HTTP configuration
http:
  middlewares:
    # Global HTTPS redirect middleware
    https-redirect:
      redirectScheme:
        scheme: https
        permanent: true

  routers:
    # Global HTTP redirect router (catches all HTTP traffic)
    http-catchall:
      rule: "hostregexp(`{host:.+}`)"
      entryPoints:
        - web
      middlewares:
        - https-redirect
      service: noop@internal
      priority: 100

    # Dashboard router
    dashboard:
      rule: "Host(`dns.localhost`)"
      service: api@internal
      entryPoints:
        - websecure
      tls: {}
